pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- main

function _init()
player=create_player(30,60)
end

function _update()
player:update()
end

function _draw()
cls()
player:draw()
end
-->8

sm={
 -- idle
 idle={
  draw=function(self)
   print("idling",
    self.x,
    self.y)
  end,
  name="idle"
 },
 running={
  draw=function(self)
   print("running",
    self.x,
    self.y)
  end,
  name="running"
 },
}

function create_player(x,y)


	return {
	 x=x,
	 y=y,
	 draw=sm.idle.draw,
	 state=sm.idle.name,
	 update=function(self)
	  if btnp(❎) then
	   if self.state==
	   sm.idle.name then
	    set_state(self,sm.running) 
	   elseif self.state==
	   sm.running.name then
	    set_state(self, sm.idle)
	   end
	  end
	 end
 }
end

function set_state(p, s)
 p.state=s.name
 p.draw=s.draw
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
